<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug - Sistema de Sprites</title>
    <style>
        body { font-family: Arial, sans-serif; background: #1a1a1a; color: white; padding: 20px; }
        .log { margin: 5px 0; padding: 5px; background: #333; border-radius: 3px; }
        .error { color: #ff6b6b; }
        .success { color: #51cf66; }
        .warning { color: #ffd93d; }
    </style>
</head>
<body>
    <h1>üêõ Debug - Sistema de Sprites de Monstros</h1>
    <div id="output"></div>

    <script type="module">
        import { MONSTER_SPRITE_CONFIG, ENEMY_TYPE_TO_SPRITE } from './js/config/monsterConfig.js';
        import { imageManager } from './js/systems/ImageManager.js';
        
        const output = document.getElementById('output');
        
        function log(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `log ${type}`;
            div.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            output.appendChild(div);
            console.log(message);
        }
        
        async function debugSystem() {
            try {
                log('üöÄ Iniciando debug...');
                
                // 1. Verificar configura√ß√£o
                log('üìã Verificando configura√ß√£o...');
                log(`MONSTER_SPRITE_CONFIG: ${JSON.stringify(MONSTER_SPRITE_CONFIG, null, 2)}`);
                log(`ENEMY_TYPE_TO_SPRITE: ${JSON.stringify(ENEMY_TYPE_TO_SPRITE, null, 2)}`);
                
                // 2. Verificar ImageManager
                log('üñºÔ∏è Verificando ImageManager...');
                log(`ImageManager dispon√≠vel: ${!!imageManager}`);
                log(`M√©todos dispon√≠veis: ${Object.getOwnPropertyNames(Object.getPrototypeOf(imageManager))}`);
                
                // 3. Testar carregamento de uma imagem
                log('üîÑ Testando carregamento de imagem...');
                const testPath = 'assets/monstros/goblin_brutao_baixo.png';
                log(`Tentando carregar: ${testPath}`);
                
                try {
                    const img = await imageManager.loadImage('test', testPath);
                    log(`‚úÖ Imagem carregada com sucesso! Tamanho: ${img.width}x${img.height}`, 'success');
                } catch (error) {
                    log(`‚ùå Erro ao carregar imagem: ${error.message}`, 'error');
                }
                
                // 4. Verificar se a imagem est√° no cache
                log('üíæ Verificando cache...');
                const cachedImg = imageManager.getImage('test');
                log(`Imagem no cache: ${!!cachedImg}`);
                
                // 5. Testar desenho
                if (cachedImg) {
                    log('üé® Testando desenho...');
                    const canvas = document.createElement('canvas');
                    canvas.width = 200;
                    canvas.height = 200;
                    canvas.style.border = '1px solid white';
                    document.body.appendChild(canvas);
                    
                    const ctx = canvas.getContext('2d');
                    ctx.fillStyle = '#333';
                    ctx.fillRect(0, 0, 200, 200);
                    
                    ctx.drawImage(cachedImg, 50, 50, 100, 100);
                    log('‚úÖ Desenho conclu√≠do!', 'success');
                }
                
            } catch (error) {
                log(`‚ùå Erro no debug: ${error.message}`, 'error');
                log(`Stack: ${error.stack}`, 'error');
            }
        }
        
        debugSystem();
    </script>
</body>
</html> 